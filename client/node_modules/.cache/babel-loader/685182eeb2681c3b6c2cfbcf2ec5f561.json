{"ast":null,"code":"var _jsxFileName = \"C:\\\\0\\\\Project\\\\Test\\\\Meteor\\\\React\\\\tes-meteorId-main\\\\client\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport { Container, Form, Button, Image, Alert } from \"react-bootstrap\";\nimport React, { useState, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { API } from \"../config/api\";\nimport { UserContext } from \"../context/userContext\";\nimport styles from \"./styleModule/Login.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  let navigate = useNavigate();\n  const [state, dispatch] = useContext(UserContext);\n  const [message, setMessage] = useState(null);\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const {\n    email,\n    password\n  } = form;\n\n  const handleChangeLogin = a => {\n    setForm({ ...form,\n      [a.target.name]: a.target.value\n    });\n  };\n\n  const handleLogin = async e => {\n    try {\n      e.preventDefault();\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }; // convert form data to string\n\n      const body = JSON.stringify(form);\n      console.log(body); // Insert data user to database\n\n      const response = await API.post(\"/login\", body, config);\n      console.log(response.data.data);\n\n      if (response.data.data.role_id === 1) {\n        navigate(\"/admin\");\n      } else if (response.data.data.role_id === 2) {\n        navigate(\"/profile\");\n      } else {\n        navigate(\"/\");\n      } // navigate(\"/profile\");\n\n\n      if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n        // Send data to useContext\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: response.data.data\n        });\n        console.log(state);\n\n        const alert = /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"success\",\n          className: \"py-1\",\n          children: \"Login success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this);\n\n        setMessage(alert);\n      }\n    } catch (error) {\n      const alert = /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"py-1\",\n        children: \"Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this);\n\n      setMessage(alert);\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.bg,\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.contain,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: picture,\n            className: styles.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cssLogin.form,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleLogin,\n            children: [message && message, /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: cssLogin.title,\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              controlId: \"formBasicEmail\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"input\",\n                type: \"email\",\n                placeholder: \"Email\",\n                name: \"email\",\n                onChange: handleChangeLogin,\n                value: email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              controlId: \"formBasicPassword\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"input\",\n                type: \"password\",\n                placeholder: \"Password\",\n                name: \"password\",\n                onChange: handleChangeLogin,\n                value: password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex mt-3\",\n              children: /*#__PURE__*/_jsxDEV(Form.Text, {\n                children: [\"Don't have an account ? Klik\", /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/register\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: cssLogin.btn,\n                    children: \"Here\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"077t1tHIYyV7/UD4MXV7VIEdxek=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/0/Project/Test/Meteor/React/tes-meteorId-main/client/src/pages/Login.js"],"names":["Container","Form","Button","Image","Alert","React","useState","useContext","Link","useNavigate","API","UserContext","styles","Login","navigate","state","dispatch","message","setMessage","form","setForm","email","password","handleChangeLogin","a","target","name","value","handleLogin","e","preventDefault","config","headers","body","JSON","stringify","console","log","response","post","data","role_id","status","type","payload","alert","error","bg","contain","picture","image","cssLogin","title","btn"],"mappings":"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","sourcesContent":["import { Container, Form, Button, Image, Alert } from \"react-bootstrap\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { API } from \"../config/api\";\r\nimport { UserContext } from \"../context/userContext\";\r\n\r\nimport styles from \"./styleModule/Login.module.css\";\r\nexport default function Login() {\r\n  let navigate = useNavigate();\r\n\r\n  const [state, dispatch] = useContext(UserContext);\r\n\r\n  const [message, setMessage] = useState(null);\r\n\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const { email, password } = form;\r\n\r\n  const handleChangeLogin = (a) => {\r\n    setForm({\r\n      ...form,\r\n      [a.target.name]: a.target.value,\r\n    });\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    try {\r\n      e.preventDefault();\r\n\r\n      const config = {\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      // convert form data to string\r\n      const body = JSON.stringify(form);\r\n\r\n      console.log(body);\r\n      // Insert data user to database\r\n      const response = await API.post(\"/login\", body, config);\r\n\r\n      console.log(response.data.data);\r\n      if (response.data.data.role_id === 1) {\r\n        navigate(\"/admin\");\r\n      } else if (response.data.data.role_id === 2) {\r\n        navigate(\"/profile\");\r\n      } else {\r\n        navigate(\"/\");\r\n      }\r\n      // navigate(\"/profile\");\r\n\r\n      if (response?.status === 200) {\r\n        // Send data to useContext\r\n        dispatch({\r\n          type: \"LOGIN_SUCCESS\",\r\n          payload: response.data.data,\r\n        });\r\n        console.log(state);\r\n\r\n        const alert = (\r\n          <Alert variant=\"success\" className=\"py-1\">\r\n            Login success\r\n          </Alert>\r\n        );\r\n        setMessage(alert);\r\n      }\r\n    } catch (error) {\r\n      const alert = (\r\n        <Alert variant=\"danger\" className=\"py-1\">\r\n          Failed\r\n        </Alert>\r\n      );\r\n      setMessage(alert);\r\n\r\n      console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <div className={styles.bg}>\r\n      <Container className=\"d-flex justify-content-center\">\r\n        <div className={styles.contain}>\r\n          <div>\r\n            <Image src={picture} className={styles.image} />\r\n          </div>\r\n          <div className={cssLogin.form}>\r\n            <form onSubmit={handleLogin}>\r\n              {message && message}\r\n              <h1 className={cssLogin.title}>Login</h1>\r\n              <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                <Form.Label>Email address</Form.Label>\r\n                <Form.Control\r\n                  className=\"input\"\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  name=\"email\"\r\n                  onChange={handleChangeLogin}\r\n                  value={email}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                <Form.Label>Password</Form.Label>\r\n                <Form.Control\r\n                  className=\"input\"\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  name=\"password\"\r\n                  onChange={handleChangeLogin}\r\n                  value={password}\r\n                />\r\n              </Form.Group>\r\n              <Button variant=\"primary\" type=\"submit\">\r\n                Login\r\n              </Button>\r\n              <div className=\"d-flex mt-3\">\r\n                <Form.Text>\r\n                  Don't have an account ? Klik\r\n                  <Link to=\"/register\">\r\n                    <button className={cssLogin.btn}>Here</button>\r\n                  </Link>\r\n                </Form.Text>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}